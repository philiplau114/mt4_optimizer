2025-08-26 12:00:11,268 [INFO] Processing MT4 report: C:\Users\Philip\Documents\GitHub\EA_Automation\02_backtest\PX3.71_EURJPY_M30_1500_P533_DD440_20220822-20250821_SL500_WR80.37_PF1.65_T428_M778746958_V1_S279-backtest_report.htm, step_id=355, metric_type=MT4 Backtest Report, EA_name=PX3.71
2025-08-26 12:00:11,467 [INFO] Config loaded from C:\Users\Philip\Documents\UiPath\MT4 Backtesting Automation\Data\Config.xlsx: {'template_path': 'C:\\Users\\Philip\\Documents\\GitHub\\mt4_optimizer\\ai_parameter_suggestion_prompt_template_integrated_v2.3.md', 'mode': '', 'suggest_sections': '', 'ignore_sections': '', 'base_parameters': '', 'spec_path': 'C:\\Users\\Philip\\Documents\\GitHub\\EA_Automation\\PhoenixSpec.csv', 'api_key': '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', 'models': 'openai/gpt-4o,anthropic/claude-3-opus'}
2025-08-26 12:00:11,484 [INFO] Performance criteria loaded from C:\Users\Philip\Documents\UiPath\MT4 Backtesting Automation\Data\Config.xlsx: {'min_total_recovery': 5.0, 'min_trades': 300.0, 'min_max_drawdown': 600.0}
2025-08-26 12:00:11,708 [INFO] Parsed metrics: {'Symbol': 'EURJPY (Euro vs Japanese Yen)', 'Period': 'M30', 'Model': 'Every tick (the most precise method based on all available least timeframes)', 'Parameters': '_______________________________________________bs="========= General Setting ========="; Full_Speed=true; \nEnterMode=1; TradeMode=2; TradeType=0; Maximum_Spread=5; Magic=778746958; Id_Comment="AcePhoenixStd3.7 CADJPY"; _______________________________________________ma="========= Entry Settings ========="; RSI_Filter=false; \nRSI_Timeframe=30; RSI_Period=4; RSI_Price=0; RSI_Shift=5; RSI_High=65; RSI_Low=30; RSI_Return=3; STO_Filter=true; \nSTO_Timeframe=0; STO_Kperiod1=5; STO_Dperiod1=3; STO_Slowing1=3; STO_Shift1=1; MA_STO_Method=0; STO_High=80; STO_Low=20; STO_Return=5; BB_Filter=true; \nBB_Timeframe=30; BB_Period=20; BB_Deviation=2; BB_Shift=1; _______________________________________________fs="========= Filter Settings ========="; _______________________________________________dc="****** Direction Control 1 ******"; Use_Tiger=true; \nApply_Dir=0; TimeT=0; Basic_Line_Shift=1; _______________________________________________e3="****** Exit General Setting ******"; Trailing=true; \nTrailing_Start1=15; Trailing_Distance1=2; Trailing_Start2=10; Trailing_Distance2=2; Trailing_Money=true; \nTrailing_Start_Money=20; Trailing_Distance_Money=15; _______________________________________________mmms="========= Risk Control Settings ========="; DrawDown_Stop_New_Money=0; DrawDown_Stop_New_Perc_=0; DrawDown_SL_Money=500; Stop_Trading_SLDay=3; __L="****** Lot Manage ******"; Lot_Type=1; Lot_Size=0.01; Risk_Equity=0.1; Lot_Multiplier=1.5; MaxLot=0.5; Custom_Lot="0.01,0.02,0.03,0.05,0.08,0.12"; Custom_Martingala="35,45,65,75,85"; __M="****** Martingala Manage ******"; Use_Indicators_Martingala=true; \nSL_Number_Of_Order=100; Pause_Between=30; Martingala_Pips=36; OrderDynamic=5; Pips_Dynamic=10; Dynamic_Distance_Multiplier=1.5; __DD="****** DD Reduction Algorithm ******"; Use_DD=true; \nOrdersDDStart=5; Hedging_Order1=3; Hedging_Order2=1; Hedging_Order3=2; Money_Profit=15; _______________________________________________ds="========= Visual Setting ========="; Show_Profits=true; \nShow_Breakeven_Points=true; \nSizeX_=230; SizeY_=170; FontSize=8; DangerMode=5; ColorDanger=LightPink; Show_Zone=false; \nZone_Color=Gray; clr_BE_Buy=Green; clr_Buy_Profits=Lime; clr_Buy_Loss=Lime; clr_BE_Sell=Red; clr_Sell_Profits=Salmon; clr_Sell_Loss=Salmon;', 'Bars in test': '37417', 'Ticks modelled': '156176302', 'Modelling quality': '99.90%', 'Mismatched charts errors': '0', 'Initial deposit': '1500.00', 'Spread': '20', 'Total net profit': '535.68', 'Gross profit': '1363.40', 'Gross loss': '-827.72', 'Profit factor': '1.65', 'Expected payoff': '1.25', 'Absolute drawdown': '119.35', 'Maximal drawdown': '441.85 (23.94%)', 'Relative drawdown': '23.94% (441.85)', 'Total trades': '428', 'Short positions (won %)': '186 (77.96%)', 'Long positions (won %)': '242 (82.23%)', 'Profit trades (% of total)': '344 (80.37%)', 'Loss trades (% of total)': '84 (19.63%)', 'start_date': datetime.date(2022, 8, 26), 'end_date': datetime.date(2025, 8, 26), 'Largest profit trade': '112.16', 'Largest loss trade': '-54.45', 'Average profit trade': '3.96', 'Average loss trade': '-9.85', 'Maximum consecutive wins (profit in money)': '29 (39.53)', 'Maximum consecutive losses (loss in money)': '5 (-154.96)', 'Maximal consecutive profit (count of wins)': '199.15 (8)', 'Maximal consecutive loss (count of losses)': '-154.96 (5)', 'Average consecutive wins': '6', 'Average consecutive losses': '2', 'Max consecutive wins': '6', 'Max consecutive losses': '2', 'Win rate': 80.37, 'Maximal drawdown value': 441.85, 'Maximal drawdown pct': 23.94, 'Relative drawdown value': 441.85, 'Relative drawdown pct': 23.94, 'Short positions count': 186, 'Short positions won pct': 77.96, 'Long positions count': 242, 'Long positions won pct': 82.23, 'Max consecutive wins count': 29, 'Max consecutive wins profit': 39.53, 'Max consecutive losses count': 5, 'Max consecutive losses loss': -154.96, 'Max consecutive profit': 199.15, 'Max consecutive profit count': 8, 'Max consecutive loss': -154.96, 'Max consecutive loss count': 5, 'largest_profit_trade': 112.16, 'largest_loss_trade': -54.45, 'average_profit_trade': 3.96, 'average_loss_trade': -9.85}
2025-08-26 12:06:19,015 [INFO] Parsed 856 trades.
2025-08-26 12:06:19,015 [INFO] Sharpe: 0.10753787520577061, Sortino: 0.13156322218193559
2025-08-26 12:06:19,015 [INFO] Calculated custom metrics: {'net_profit': 535.68, 'gross_profit': 1363.4, 'gross_loss': -827.72, 'profit_factor': 1.65, 'expected_payoff': 1.25, 'max_drawdown': 441.85, 'max_drawdown_pct': 23.94, 'max_relative_drawdown': 441.85, 'max_relative_drawdown_pct': 23.94, 'absolute_drawdown': 119.35, 'initial_deposit': 1500.0, 'total_trades': 428, 'profit_trades_pct': 80.37, 'loss_trades_pct': 19.63, 'largest_profit': 112.16, 'largest_loss': -54.45, 'recovery_factor': 4.488311688311688, 'sharpe_ratio': 0.10753787520577061, 'sortino_ratio': 0.13156322218193559, 'net_profit_per_initial_deposit': 0.35712, 'absolute_drawdown_per_initial_deposit': 0.07956666666666666, 'bars_in_test': 37417, 'ticks_modelled': 156176302, 'modelling_quality': 99.9, 'mismatched_charts_errors': 0, 'spread': 20.0, 'win_rate': 80.37, 'short_positions': 186, 'short_positions_won_pct': 77.96, 'long_positions': 242, 'long_positions_won_pct': 82.23, 'largest_profit_trade': 112.16, 'largest_loss_trade': -54.45, 'max_consecutive_wins': 29, 'max_consecutive_wins_profit': 39.53, 'max_consecutive_profit': 199.15, 'max_consecutive_profit_count': 8, 'max_consecutive_losses': 5, 'max_consecutive_losses_loss': -154.96, 'max_consecutive_loss': -154.96, 'max_consecutive_loss_count': 5}
2025-08-26 12:06:19,015 [INFO] DrawDown_SL_Money calculated: 500
2025-08-26 12:06:19,015 [INFO] Performance criteria: passed=False, reason=recovery_factor
2025-08-26 12:06:19,015 [INFO] Summary CSV written to C:\Users\Philip\Documents\GitHub\EA_Automation\02_backtest\PX3.71_EURJPY_M30_1500_P535_DD441_20220826-20250826_SL500_WR80.37_PF1.65_T428_M1824977686_V1_S355_summary_metrics.csv
2025-08-26 12:06:19,022 [INFO] Copied C:\Users\Philip\Documents\GitHub\EA_Automation\01_user_inputs\PX3.71_EURJPY_M30_1500_P533_DD440_20220822-20250821_SL500_WR80.37_PF1.65_T428_M778746958_V1_S279.set to C:\Users\Philip\Documents\GitHub\EA_Automation\02_backtest\PX3.71_EURJPY_M30_1500_P535_DD441_20220826-20250826_SL500_WR80.37_PF1.65_T428_M1824977686_V1_S355.set
2025-08-26 12:06:19,030 [INFO] Updated DrawDown_SL_Money in C:\Users\Philip\Documents\GitHub\EA_Automation\02_backtest\PX3.71_EURJPY_M30_1500_P535_DD441_20220826-20250826_SL500_WR80.37_PF1.65_T428_M1824977686_V1_S355.set to 500
2025-08-26 12:06:19,047 [INFO] Updated Magic in C:\Users\Philip\Documents\GitHub\EA_Automation\02_backtest\PX3.71_EURJPY_M30_1500_P535_DD441_20220826-20250826_SL500_WR80.37_PF1.65_T428_M1824977686_V1_S355.set to 1824977686
2025-08-26 12:06:19,047 [INFO] Inserted test_metrics summary.
2025-08-26 12:06:19,047 [INFO] Inserted 856 trades.
2025-08-26 12:06:19,057 [INFO] Database commit successful.
2025-08-26 12:06:19,057 [INFO] Database connection closed.
2025-08-26 12:06:19,486 [INFO] Loaded prompt template from C:\Users\Philip\Documents\GitHub\mt4_optimizer\ai_parameter_suggestion_prompt_template_integrated_v2.3.md
2025-08-26 12:06:19,486 [INFO] Read 7836 characters from C:\Users\Philip\Documents\GitHub\EA_Automation\02_backtest\PX3.71_EURJPY_M30_1500_P535_DD441_20220826-20250826_SL500_WR80.37_PF1.65_T428_M1824977686_V1_S355.set
2025-08-26 12:06:19,486 [INFO] Read 6919 characters from C:\Users\Philip\Documents\GitHub\EA_Automation\PhoenixSpec.csv
2025-08-26 12:06:19,486 [INFO] Read 2697 characters from C:\Users\Philip\Documents\GitHub\EA_Automation\02_backtest\PX3.71_EURJPY_M30_1500_P535_DD441_20220826-20250826_SL500_WR80.37_PF1.65_T428_M1824977686_V1_S355_summary_metrics.csv
2025-08-26 12:06:19,510 [INFO] Performance metrics block loaded from C:\Users\Philip\Documents\UiPath\MT4 Backtesting Automation\Data\Config.xlsx.
2025-08-26 12:06:19,510 [INFO] Parsed 59 param-to-section mappings.
2025-08-26 12:06:19,514 [INFO] Ancestry chain for PX3.71_EURJPY_M30_1500_P535_DD441_20220826-20250826_SL500_WR80.37_PF1.65_T428_M1824977686_V1_S355.set: ['PX3.71_EURJPY_M30_1500_P535_DD441_20220826-20250826_SL500_WR80.37_PF1.65_T428_M1824977686_V1_S355.set', 'PX3.71_EURJPY_M30_1500_P533_DD440_20220822-20250821_SL500_WR80.37_PF1.65_T428_M778746958_V1_S279.set', 'PX3.71_EURJPY_M30_1500_P535_DD441_20220822-20250821_SL500_WR80.37_PF1.65_T428_M953855629_V1_S265.set']
2025-08-26 12:06:19,514 [INFO] Fetched 4 suggestions for ancestry sections.
2025-08-26 12:06:19,514 [INFO] Suggestion history summary block built for PX3.71_EURJPY_M30_1500_P535_DD441_20220826-20250826_SL500_WR80.37_PF1.65_T428_M1824977686_V1_S355.set.
2025-08-26 12:06:19,517 [INFO] Prompt with history built.
2025-08-26 12:06:19,517 [INFO] Models: ['openai/gpt-4o', 'anthropic/claude-3-opus']
2025-08-26 12:06:19,517 [INFO] Prompt size: 25126 chars
2025-08-26 12:06:19,904 [INFO] Prompt token count: 7700
2025-08-26 12:06:19,904 [INFO] Querying OpenRouter model: openai/gpt-4o
2025-08-26 12:06:26,459 [INFO] OpenRouter API call successful for model: openai/gpt-4o
2025-08-26 12:06:26,461 [INFO] Extracted 2 JSON objects from response.
2025-08-26 12:06:26,461 [INFO] Querying OpenRouter model: anthropic/claude-3-opus
2025-08-26 12:06:56,052 [INFO] OpenRouter API call successful for model: anthropic/claude-3-opus
2025-08-26 12:06:56,052 [INFO] Extracted 2 JSON objects from response.
2025-08-26 12:06:56,052 [INFO] Coverage voting merged 8 parameter ranges.
2025-08-26 12:06:56,059 [INFO] Saved optimization suggestion to DB with suggestion_id=53
2025-08-26 12:06:56,059 [INFO] Suggestion JSON written to C:\Users\Philip\Documents\GitHub\EA_Automation\02_backtest\PX3.71_EURJPY_M30_1500_P535_DD441_20220826-20250826_SL500_WR80.37_PF1.65_T428_M1824977686_V1_S355-AI-Suggestion.json
2025-08-26 12:06:56,078 [INFO] Updated .set file written to: C:\Users\Philip\Documents\GitHub\EA_Automation\02_backtest\PX3.71_EURJPY_M30_1500_P535_DD441_20220826-20250826_SL500_WR80.37_PF1.65_T428_M1824977686_V1_S355-AI-Suggest-Opt.set
2025-08-26 12:06:56,078 [INFO] DB: suggestion_id=53. Updated .set file written to: C:\Users\Philip\Documents\GitHub\EA_Automation\02_backtest\PX3.71_EURJPY_M30_1500_P535_DD441_20220826-20250826_SL500_WR80.37_PF1.65_T428_M1824977686_V1_S355-AI-Suggest-Opt.set
2025-08-26 12:06:56,078 [INFO] AI set file suggestion complete: C:\Users\Philip\Documents\GitHub\EA_Automation\02_backtest\PX3.71_EURJPY_M30_1500_P535_DD441_20220826-20250826_SL500_WR80.37_PF1.65_T428_M1824977686_V1_S355-AI-Suggest-Opt.set
